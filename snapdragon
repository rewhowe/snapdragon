#!/usr/bin/env ruby

require File.join(File.dirname(__FILE__), 'src', 'lexer.rb')

OPTIONS = {
  debug: false,
}

filename = nil

ARGV.each do |arg|
  case arg
  when '-d', '--debug'
    OPTIONS[:debug] = true
  else
    if (arg =~ /^-/).nil? && filename.nil?
      filename = arg
    end
  end
end

if filename.nil? || !File.exist?(filename)
  raise "Input file (#{filename}) not found"
end

Lexer::tokenize(filename, OPTIONS)
