#!/usr/bin/env ruby

require_relative File.join('src', 'lexer.rb')
require_relative File.join('src', 'colour_string.rb')

OPTIONS = {
  debug: false,
} .freeze

filename = nil

ARGV.each do |arg|
  case arg
  when '-d', '--debug'
    OPTIONS[:debug] = true
  else
    filename = arg if (arg =~ /^-/).nil? && filename.nil?
  end
end

if filename.nil? || !File.exist?(filename)
  raise "Input file (#{filename}) not found"
end

_tokens = Lexer.tokenize(filename, OPTIONS)
# TODO: send tokens to transpiler... also find a better name for transpiler
